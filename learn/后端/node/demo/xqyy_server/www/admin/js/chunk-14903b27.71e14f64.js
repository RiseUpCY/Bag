(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14903b27"],{2423:function(t,e,o){"use strict";o.d(e,"b",function(){return n}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return s}),o.d(e,"d",function(){return i});var r=o("66df"),n=function(t){return r["a"].request({url:"article/list",method:"get",params:{cateid:t}})},a=function(t){return r["a"].request({url:"article/one",method:"get",params:{id:t}})},s=function(t){return r["a"].request({url:"article/delete",method:"get",params:{id:t}})},i=function(t,e,o){return r["a"].request({url:"article/submit",method:"post",data:{token:t,articleinfo:e,id:o}})}},"484f":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Card",[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"ios-paper"}}),t._v("\n        "+t._s(t.id?t.article.title:"新")+"文章的信息\n      ")],1),o("div",{staticClass:"form-wapper"},[o("Form",{ref:"formCustom",attrs:{model:t.formCustom,"label-width":80}},[o("FormItem",{attrs:{label:"文章标题",prop:"title"}},[o("Input",{attrs:{type:"text"},model:{value:t.formCustom.title,callback:function(e){t.$set(t.formCustom,"title",e)},expression:"formCustom.title"}})],1),o("FormItem",{attrs:{label:"文章简介",prop:"profile"}},[o("Input",{attrs:{type:"textarea"},model:{value:t.formCustom.profile,callback:function(e){t.$set(t.formCustom,"profile",e)},expression:"formCustom.profile"}})],1),o("FormItem",{attrs:{label:"文章状态",prop:"state"}},[o("RadioGroup",{model:{value:t.formCustom.state,callback:function(e){t.$set(t.formCustom,"state",e)},expression:"formCustom.state"}},[t.viewAccessSuper?o("Radio",{attrs:{label:"publish"}},[t._v("已发布")]):t._e(),o("Radio",{attrs:{label:"store"}},[t._v("未发布")]),o("Radio",{attrs:{label:"trash"}},[t._v("垃圾箱")])],1)],1),o("Row",[o("Col",{attrs:{span:"6"}},[o("FormItem",{attrs:{label:"发布人",prop:"editor"}},[o("Input",{attrs:{type:"text",disabled:""},model:{value:t.formCustom.editor,callback:function(e){t.$set(t.formCustom,"editor",e)},expression:"formCustom.editor"}})],1)],1)],1),o("FormItem",{staticClass:"layer-up-one",attrs:{label:"文章类别",prop:"type"}},[o("Select",{staticStyle:{width:"200px"},model:{value:t.formCustom.type,callback:function(e){t.$set(t.formCustom,"type",e)},expression:"formCustom.type"}},t._l(t.articleTypes,function(e,r){return o("OptionGroup",{key:r,attrs:{label:e.parent}},t._l(e.children,function(e){return o("Option",{key:e.mark,attrs:{value:e.mark}},[t._v(t._s(e.title))])}))}))],1),o("Row",{staticClass:"layer-up-two"},[o("Col",{attrs:{span:"10"}},[o("FormItem",{attrs:{label:"发布日期",prop:"date"}},[o("DatePicker",{attrs:{type:"date",placeholder:"Select date"},model:{value:t.formCustom.date,callback:function(e){t.$set(t.formCustom,"date",e)},expression:"formCustom.date"}})],1)],1),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),o("Col",{attrs:{span:"10"}},[o("FormItem",{attrs:{prop:"time"}},[o("TimePicker",{attrs:{type:"time",placeholder:"Select time"},model:{value:t.formCustom.time,callback:function(e){t.$set(t.formCustom,"time",e)},expression:"formCustom.time"}})],1)],1)],1),o("FormItem",{attrs:{label:"文章内容",prop:"content"}},[o("wangEditor",{attrs:{content:t.content},on:{"html-changed":t.htmlChange}})],1),o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formCustom")}}},[t._v("Submit")]),o("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.handleReset("formCustom")}}},[t._v("Reset")])],1)],1)],1)])],1)},n=[],a=(o("f751"),o("7f7f"),o("28a5"),o("cadf"),o("551c"),o("097d"),o("b696")),s=o("2423"),i=o("90de"),c=o("c276"),u=o("1b62"),m=o("88ec"),l={mixins:[u["a"]],name:"userdetail",data:function(){return{id:void 0,article:{},content:"",formCustom:{title:"请输入标题",profile:"请输入简介",state:"store",editor:"未知",type:"",date:"",time:"",content:""}}},methods:{handleSubmit:function(){var t=this;if(confirm("你确定要提交吗？")){var e=this.formCustom.type.split("-");this.formCustom.cateid=e[0],this.formCustom.cateindex=e[1];var o=this.formCustom,r=o.date,n=o.time;if(r||n){if(r||(r=(new Date).getTime()),n){var a=n.split(":");r.setHours(a[0]),r.setMinutes(a[1]),r.setSeconds(a[2])}this.formCustom.create_time=r.getTime()}this.id||(this.formCustom.editor_id=this.$store.getters.userId),Object(s["d"])(this.token,this.formCustom,this.id).then(function(e){0===e.code?(t.$Message.success("上传文章成功"),t.reSetContent("")):t.$Message.error(e.data)}).catch(function(e){t.$Message.error(e.data)})}},htmlChange:function(t){this.formCustom.content=t},handleReset:function(){this.formCustom=Object(i["a"])(this.article),this.reSetContent(this.formCustom.content)},reSetContent:function(t){var e=this;this.content="",this.$nextTick(function(){e.content=t})}},mounted:function(){var t=this,e=this.$route.query.id;if(this.token=Object(c["l"])(),this.id=e,!e)return this.formCustom.editor=this.name,void this.reSetContent(" ");Object(s["c"])(e).then(function(e){e.data&&e.data.id&&(t.formCustom=Object.assign(t.formCustom,e.data,{type:"".concat(e.data.cateid,"-").concat(e.data.cateindex),editor:e.data.editor?e.data.editor:"未知"}),t.article=Object(i["a"])(t.formCustom),t.reSetContent(t.formCustom.content))})},computed:{viewAccessSuper:function(){return Object(i["e"])(["super_admin"],this.access)},articleTypes:function(){return Object(m["c"])("article","articlelist")}},components:{wangEditor:a["a"]}},f=l,d=(o("5339"),o("2877")),p=Object(d["a"])(f,r,n,!1,null,"6b8b8ac2",null);p.options.__file="article_add.vue";e["default"]=p.exports},5339:function(t,e,o){"use strict";var r=o("b048"),n=o.n(r);n.a},"6cef":function(t,e,o){"use strict";var r=o("f7bb"),n=o.n(r);n.a},b048:function(t,e,o){},b696:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("editor",{ref:"editor",attrs:{value:t.content},on:{"on-change":t.handleChange}})],1)},n=[],a=o("a0f0"),s={name:"editor_page",components:{Editor:a["a"]},props:{content:{type:String,default:"请输入内容"}},methods:{handleChange:function(t,e){this.$emit("html-changed",t)},changeContent:function(t){this.$refs.editor.setHtml(t)}},watch:{content:function(t){this.changeContent(t)}}},i=s,c=(o("6cef"),o("2877")),u=Object(c["a"])(i,r,n,!1,null,null,null);u.options.__file="editor.vue";e["a"]=u.exports},f7bb:function(t,e,o){}}]);